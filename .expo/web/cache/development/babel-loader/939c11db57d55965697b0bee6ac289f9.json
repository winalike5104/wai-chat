{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useLayoutEffect, useState, useRef } from 'react';\nimport { BASE_URL } from \"../constants\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Avatar, ListItem } from \"react-native-elements\";\nimport { AntDesign } from \"@expo/vector-icons\";\nimport * as ImagePicker from 'expo-image-picker';\nimport { Audio } from 'expo-av';\nimport FontAwesome from \"@expo/vector-icons/FontAwesome\";\nimport Ionicons from \"@expo/vector-icons/Ionicons\";\nimport axios from \"axios\";\nimport * as SecureStore from \"expo-secure-store\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nvar SelectUserScreen = function SelectUserScreen(_ref) {\n  var navigation = _ref.navigation,\n      route = _ref.route;\n\n  var _useState = useState({\n    chatters: []\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      room = _useState2[0],\n      setRoom = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      users = _useState4[0],\n      setUsers = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var _route$params = route.params,\n      chatID = _route$params.chatID,\n      chatName = _route$params.chatName,\n      token = _route$params.token,\n      userID = _route$params.userID,\n      phoneNumber = _route$params.phoneNumber;\n  useEffect(function () {\n    (function _callee2() {\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              console.log(\"token\", token);\n              _context2.next = 3;\n              return _regeneratorRuntime.awrap(axios.get(BASE_URL + 'api/chatroom/' + chatID, {\n                headers: {\n                  'Authorization': \"Token \" + token\n                }\n              }).then(function _callee(response) {\n                return _regeneratorRuntime.async(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        console.log(\"response.data\", response.data);\n                        setRoom(response.data);\n                        _context.next = 4;\n                        return _regeneratorRuntime.awrap(axios.get(BASE_URL + 'api/showAllUsers/', {\n                          headers: {\n                            'Authorization': \"Token \" + token\n                          }\n                        }).then(function (response) {\n                          console.log(\"response.data2222\", response.data);\n                          setLoading(false);\n                          setUsers(response.data.user);\n                        }).catch(function (error) {\n                          console.log(\"no token\");\n                          console.log(error);\n                        }));\n\n                      case 4:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, null, null, null, Promise);\n              }).catch(function (error) {\n                console.log(\"no token\");\n                console.log(error);\n              }));\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n  useLayoutEffect(function () {\n    navigation.setOptions({\n      title: \"Add User\",\n      headerStyle: {\n        backgroundColor: \"#3B5F41\"\n      },\n      headerTitleStyle: {\n        color: \"white\"\n      },\n      headerTintColor: \"black\",\n      headerBackTitleVisible: false,\n      headerTitleAlign: \"left\",\n      headerLeft: function headerLeft() {\n        return _jsx(TouchableOpacity, {\n          style: {\n            marginLeft: 10\n          },\n          onPress: navigation.goBack,\n          children: _jsx(AntDesign, {\n            name: \"arrowleft\",\n            size: 24,\n            color: 'white'\n          })\n        });\n      }\n    });\n  }, []);\n\n  var addUser = function addUser(user, i) {\n    room.chatters.push(user.id);\n    setRoom(_objectSpread({}, room));\n    axios.patch(BASE_URL + 'api/chatroom/' + room.id + \"/\", {\n      \"id\": room.id,\n      \"name\": room.name,\n      \"created_at\": room.created_at,\n      \"chatroomtype\": room.chatroomtype,\n      \"creator\": room.creator,\n      \"chatters\": room.chatters\n    }, {\n      headers: {\n        'Authorization': \"Token \" + token\n      }\n    }).then(function _callee3(response) {\n      return _regeneratorRuntime.async(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              navigation.goBack();\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }).catch(function (err) {\n      return alert(\"Send Failed\");\n    });\n  };\n\n  return _jsxs(SafeAreaView, {\n    style: {\n      flex: 1,\n      backgroundColor: \"#F2F2F2\"\n    },\n    children: [_jsx(StatusBar, {\n      style: \"light\"\n    }), _jsx(KeyboardAvoidingView, {\n      behavior: Platform.OS === \"ios\" ? \"padding\" : \"height\",\n      style: styles.container,\n      keyboardVerticalOffset: 90,\n      children: _jsx(TouchableWithoutFeedback, {\n        onPress: Keyboard.dismiss,\n        children: !loading ? _jsx(_Fragment, {\n          children: _jsx(ScrollView, {\n            contentContainerStyle: {\n              paddingTop: 15,\n              backgroundColor: '#F2F2F2'\n            },\n            ref: function ref(_ref2) {\n              scrollView = _ref2;\n            },\n            onContentSizeChange: function onContentSizeChange() {\n              return scrollView.scrollToEnd({\n                animated: true\n              });\n            },\n            children: _jsx(View, {\n              children: users.map(function (user, i) {\n                return _jsxs(View, {\n                  style: styles.reciever,\n                  children: [_jsx(Avatar, {\n                    source: require(\"../assets/young-user-icon.jpg\"),\n                    rounded: true,\n                    size: 30\n                  }), _jsx(Text, {\n                    style: styles.nicknameText,\n                    children: user.first_name + ' ' + user.last_name\n                  }), _jsx(TouchableOpacity, {\n                    onPress: function onPress() {\n                      addUser(user, i);\n                    },\n                    activeOpacity: 0.5,\n                    children: _jsx(View, {\n                      style: styles.imageOutline,\n                      children: _jsx(Text, {\n                        style: styles.deleteText,\n                        children: \"add\"\n                      })\n                    })\n                  })]\n                }, user.id);\n              })\n            })\n          })\n        }) : _jsx(Text, {\n          children: \"loading\"\n        })\n      })\n    })]\n  });\n};\n\nexport default SelectUserScreen;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  footer: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    width: \"100%\",\n    padding: 15\n  },\n  textInput: {\n    bottom: 0,\n    height: 40,\n    flex: 1,\n    marginRight: 15,\n    borderColor: \"transparent\",\n    backgroundColor: \"#ECECEC\",\n    padding: 10,\n    color: \"gray\",\n    borderRadius: 30\n  },\n  imageOutline: {\n    marginLeft: 10\n  },\n  micOutline: {},\n  picture: {\n    width: 150,\n    height: 150\n  },\n  nicknameText: {\n    color: \"black\",\n    fontWeight: \"500\",\n    marginLeft: 10,\n    flex: 1\n  },\n  deleteText: {\n    color: \"#6576ff\",\n    fontWeight: \"500\",\n    marginLeft: 10\n  },\n  senderText: {\n    color: \"black\",\n    fontWeight: \"500\",\n    marginLeft: 10,\n    marginBottom: 15\n  },\n  reciever: {\n    padding: 15,\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\"\n  },\n  sender: {\n    paddingTop: 5,\n    paddingBottom: 5,\n    paddingHorizontal: 15,\n    backgroundColor: \"white\",\n    alignSelf: \"flex-start\",\n    borderTopLeftRadius: 0,\n    borderTopRightRadius: 20,\n    borderBottomLeftRadius: 20,\n    borderBottomRightRadius: 20,\n    marginLeft: 45,\n    marginRight: 20,\n    marginBottom: 20,\n    maxWidth: \"80%\",\n    position: \"relative\"\n  },\n  senderName: {\n    left: 10,\n    paddingRight: 10,\n    fontSize: 10,\n    color: \"grey\"\n  }\n});","map":{"version":3,"sources":["C:/Users/sanli/Desktop/backup/wai-chat-master(1)/screens/SelectUserScreen.js"],"names":["React","useEffect","useLayoutEffect","useState","useRef","BASE_URL","Avatar","ListItem","AntDesign","ImagePicker","Audio","FontAwesome","Ionicons","axios","SecureStore","SelectUserScreen","navigation","route","chatters","room","setRoom","users","setUsers","loading","setLoading","params","chatID","chatName","token","userID","phoneNumber","console","log","get","headers","then","response","data","user","catch","error","setOptions","title","headerStyle","backgroundColor","headerTitleStyle","color","headerTintColor","headerBackTitleVisible","headerTitleAlign","headerLeft","marginLeft","goBack","addUser","i","push","id","patch","name","created_at","chatroomtype","creator","err","alert","flex","Platform","OS","styles","container","Keyboard","dismiss","paddingTop","ref","scrollView","scrollToEnd","animated","map","reciever","require","nicknameText","first_name","last_name","imageOutline","deleteText","StyleSheet","create","footer","flexDirection","alignItems","width","padding","textInput","bottom","height","marginRight","borderColor","borderRadius","micOutline","picture","fontWeight","senderText","marginBottom","display","sender","paddingBottom","paddingHorizontal","alignSelf","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","maxWidth","position","senderName","left","paddingRight","fontSize"],"mappings":"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","sourcesContent":["import React, { useEffect, useLayoutEffect, useState, useRef } from 'react';\n//import { GiftedChat } from 'react-native-gifted-chat'\nimport { BASE_URL } from \"../constants\";\nimport {\n  StyleSheet,\n  KeyboardAvoidingView,\n  SafeAreaView,\n  StatusBar,\n  Text,\n  TouchableOpacity,\n  View,\n  Platform, ScrollView, TextInput, Keyboard, TouchableWithoutFeedback, Linking,\n  Image\n} from 'react-native';\nimport { Avatar, ListItem } from \"react-native-elements\";\nimport { AntDesign } from \"@expo/vector-icons\";\nimport * as ImagePicker from 'expo-image-picker';\nimport { Audio } from 'expo-av';\n\n// import {AudioRecorder, AudioUtils} from 'react-native-audio';\n\nimport FontAwesome from \"react-native-vector-icons/FontAwesome\";\nimport Ionicons from \"react-native-vector-icons/Ionicons\";\nimport axios from \"axios\";\nimport * as SecureStore from \"expo-secure-store\";\n\nconst SelectUserScreen = ({ navigation, route }) => {\n  // const BASE_URL = 'https://wai-chat-api.herokuapp.com/';\n  const [room, setRoom] = useState({\n    chatters: []\n  })\n\n  const [users, setUsers] = useState([])\n\n  const [loading, setLoading] = useState(true);\n  const { chatID, chatName, token, userID, phoneNumber } = route.params;\n\n\n  useEffect(() => {\n\n    (async () => {\n      console.log(\"token\", token);\n\n\n      await axios.get(BASE_URL + 'api/chatroom/' + chatID, {\n        headers: {\n          'Authorization': `Token ` + token\n        }\n      }).then(async function (response) {\n        console.log(\"response.data\", response.data);\n        setRoom(response.data)\n        await axios.get(BASE_URL + 'api/showAllUsers/', {\n          headers: {\n            'Authorization': `Token ` + token\n          }\n        }).then(function (response) {\n          console.log(\"response.data2222\", response.data);\n          setLoading(false);\n          setUsers(response.data.user)\n          // handle success\n        }).catch(function (error) {\n          // handle error\n          console.log(\"no token\");\n          console.log(error);\n          // navigation.navigate(\"login\");\n        });\n\n        // handle success\n      }).catch(function (error) {\n        // handle error\n        console.log(\"no token\");\n        console.log(error);\n        // navigation.navigate(\"login\");\n      });\n    })()\n  }, [])\n\n\n  useLayoutEffect(() => {\n    navigation.setOptions({\n      title: \"Add User\",\n      headerStyle: { backgroundColor: \"#3B5F41\" },\n      headerTitleStyle: { color: \"white\" },\n      headerTintColor: \"black\",\n      headerBackTitleVisible: false,\n      headerTitleAlign: \"left\",\n      headerLeft: () => (\n        <TouchableOpacity style={{\n          marginLeft: 10,\n        }} onPress={navigation.goBack}>\n          <AntDesign name={\"arrowleft\"} size={24} color={'white'} />\n        </TouchableOpacity>\n      )\n    })\n  }, [])\n\n\n\n  const addUser = (user, i) => {\n    room.chatters.push(user.id);\n    setRoom({ ...room });\n    // create message\n    axios.patch(BASE_URL + 'api/chatroom/' + room.id + \"/\",\n      {\n        \"id\": room.id,\n        \"name\": room.name,\n        \"created_at\": room.created_at,\n        \"chatroomtype\": room.chatroomtype,\n        \"creator\": room.creator,\n        \"chatters\": room.chatters\n      }, {\n      headers: {\n        'Authorization': `Token ` + token\n      }\n    },\n    ).then(async response => {\n      navigation.goBack();\n      \n    }).catch(err => alert(\"Send Failed\"))\n\n\n\n\n  };\n\n\n  return (\n\n    <SafeAreaView style={{\n      flex: 1,\n      backgroundColor: \"#F2F2F2\"\n    }}>\n      <StatusBar style={\"light\"} />\n      <KeyboardAvoidingView\n        behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}\n        style={styles.container}\n        keyboardVerticalOffset={90}\n      >\n        <TouchableWithoutFeedback onPress={Keyboard.dismiss}>\n          {!loading ?\n            <>\n              <ScrollView\n                contentContainerStyle={{ paddingTop: 15, backgroundColor: '#F2F2F2' }}\n                //自动到最下\n                ref={ref => {\n                  scrollView = ref\n                }}\n                onContentSizeChange={() => scrollView.scrollToEnd({ animated: true })}>\n                <View>\n                  {users.map((user, i) => (\n                    //收\n                    <View key={user.id} style={styles.reciever}>\n                      <Avatar\n                        source={require(\"../assets/young-user-icon.jpg\")}\n                        rounded\n                        size={30}\n                      />\n                      <Text style={styles.nicknameText}>{user.first_name + ' '+user.last_name}</Text>\n                      <TouchableOpacity onPress={() => {\n                        addUser(user, i);\n                      }} activeOpacity={0.5}>\n                        <View style={styles.imageOutline}>\n                          <Text style={styles.deleteText}>add</Text>\n                        </View>\n                      </TouchableOpacity>\n                    </View>\n                  ))}\n                </View>\n              </ScrollView>\n            </>\n            : <Text>loading</Text>}\n\n        </TouchableWithoutFeedback>\n      </KeyboardAvoidingView>\n    </SafeAreaView>\n\n  );\n};\n\nexport default SelectUserScreen;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  footer: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    width: \"100%\",\n    padding: 15,\n  },\n  textInput: {\n    bottom: 0,\n    height: 40,\n    flex: 1,\n    marginRight: 15,\n    borderColor: \"transparent\",\n    backgroundColor: \"#ECECEC\",\n    // borderWidth:1,\n    padding: 10,\n    color: \"gray\",\n    borderRadius: 30,\n  },\n  imageOutline: {\n    marginLeft: 10\n  },\n  micOutline: {\n\n  },\n  picture: {\n    width: 150,\n    height: 150\n  },\n  nicknameText: {\n    color: \"black\",\n    fontWeight: \"500\",\n    marginLeft: 10,\n    flex: 1\n  },\n  deleteText: {\n    color: \"#6576ff\",\n    fontWeight: \"500\",\n    marginLeft: 10,\n  },\n  senderText: {\n    color: \"black\",\n    fontWeight: \"500\",\n    marginLeft: 10,\n    marginBottom: 15,\n  },\n  reciever: {\n    padding: 15,\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\"\n  },\n  sender: {\n    paddingTop: 5,\n    paddingBottom: 5,\n    paddingHorizontal: 15,\n    backgroundColor: \"white\",\n    alignSelf: \"flex-start\",\n    borderTopLeftRadius: 0,\n    borderTopRightRadius: 20,\n    borderBottomLeftRadius: 20,\n    borderBottomRightRadius: 20,\n    marginLeft: 45,\n    marginRight: 20,\n    marginBottom: 20,\n    maxWidth: \"80%\",\n    position: \"relative\",\n  },\n  senderName: {\n    left: 10,\n    paddingRight: 10,\n    fontSize: 10,\n    color: \"grey\",\n  }\n})"]},"metadata":{},"sourceType":"module"}